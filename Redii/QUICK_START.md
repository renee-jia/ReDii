# Redii iOS é¡¹ç›® - å¿«é€Ÿå¼€å§‹

## é¡¹ç›®æ¦‚è¿°

Redii æ˜¯ä¸€ä¸ªç§å¯†çš„ä¼´ä¾£åº”ç”¨ï¼Œè®©ä¸¤ä¸ªäººè®°å½•å…±åŒçš„ç¾å¥½æ—¶å…‰ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ  é¦–é¡µ
- æ˜¾ç¤ºåœ¨ä¸€èµ·çš„å¤©æ•°
- å¿«é€Ÿæ·»åŠ æ—¶åˆ»
- å¿«é€Ÿè®¿é—® AI Chat å’Œ Partner Chat

### â­ æ—¶åˆ» (Moments)
- æ”¯æŒå¤šç§ç±»å‹ï¼šç¬”è®°ã€ç…§ç‰‡ã€å¿ƒæƒ…ã€è¯­éŸ³
- ç­›é€‰åŠŸèƒ½ï¼ˆå…¨éƒ¨/ç¬”è®°/ç…§ç‰‡/å¿ƒæƒ…/è¯­éŸ³ï¼‰
- ä¸‹æ‹‰åˆ·æ–°
- æ»‘åŠ¨åˆ é™¤

### ğŸ¤– AI Chatï¼ˆæ–°åŠŸèƒ½ï¼‰
- **OpenAI é£æ ¼çš„å¯¹è¯ç•Œé¢**
- **å¤šæ¨¡æ€è¾“å…¥æ”¯æŒ**ï¼š
  - ğŸ“ æ–‡æœ¬
  - ğŸ¤ è¯­éŸ³
  - ğŸ“· å›¾ç‰‡
  - ğŸ¥ è§†é¢‘
  - ğŸ“„ æ–‡ä»¶
- ä¸åç«¯ API é›†æˆ
- æ¶ˆæ¯è‡ªåŠ¨æ»šåŠ¨
- ä¼˜é›…çš„åŠ è½½åŠ¨ç”»

### ğŸ’¬ Partner Chat
- ç§å¯†èŠå¤©
- è¡¨æƒ…å›åº”
- å®æ—¶åŒæ­¥

### ğŸ“¸ è®°å¿†ç”»å»Š
- ç…§ç‰‡å’Œè¯­éŸ³ç½‘æ ¼å±•ç¤º
- è¯¦ç»†æŸ¥çœ‹
- æ—¶é—´çº¿æµè§ˆ

### âš™ï¸ è®¾ç½®
- ä¸»é¢˜é¢œè‰²
- åº”ç”¨é”å®š
- æ•°æ®å¯¼å‡º

## æŠ€æœ¯æ ˆ

- **UI**: SwiftUI
- **æ¶æ„**: MVVM + Repository
- **æ•°æ®**: Core Data + CloudKit
- **ä¾èµ–æ³¨å…¥**: DI Container
- **å¼‚æ­¥**: async/await
- **æµ‹è¯•**: å•å…ƒæµ‹è¯•ï¼ˆåŒ…å«æµ‹è¯•ç¤ºä¾‹ï¼‰

## AI Chat è¯¦ç»†åŠŸèƒ½

### è¾“å…¥ç±»å‹
```swift
enum InputType {
    case text      // æ–‡æœ¬è¾“å…¥
    case voice     // è¯­éŸ³å½•åˆ¶
    case image     // å›¾ç‰‡é€‰æ‹©
    case video     // è§†é¢‘é€‰æ‹©
    case file      // æ–‡ä»¶ä¸Šä¼ 
}
```

### æ¶ˆæ¯æ¨¡å‹
```swift
struct AIMessage: Identifiable, Codable {
    let id: UUID
    var content: String
    let timestamp: Date
    let role: MessageRole  // user / assistant
    var attachments: [Attachment]?
}
```

### ä½¿ç”¨æ–¹æ³•

1. **è®¿é—® AI Chat**
   - åœ¨æ ‡ç­¾æ é€‰æ‹© "AI Chat"
   - æˆ–åœ¨é¦–é¡µç‚¹å‡» "AI Chat" æŒ‰é’®
   - æˆ–åœ¨é¡¶éƒ¨å·¥å…·æ ç‚¹å‡» sparkles å›¾æ ‡

2. **å‘é€æ–‡æœ¬æ¶ˆæ¯**
   - è¾“å…¥æ–‡æœ¬
   - ç‚¹å‡»è“è‰²å‘é€æŒ‰é’®

3. **æ·»åŠ é™„ä»¶**
   - ç‚¹å‡»åº•éƒ¨å·¥å…·æ çš„å›¾æ ‡ï¼š
     - ğŸ“· Photo: é€‰æ‹©å›¾ç‰‡
     - ğŸ¥ Video: é€‰æ‹©è§†é¢‘
     - ğŸ¤ Voice: å½•åˆ¶è¯­éŸ³
     - ğŸ“„ File: é€‰æ‹©æ–‡ä»¶

4. **é¢„è§ˆé™„ä»¶**
   - é™„ä»¶ä¼šåœ¨è¾“å…¥æ¡†ä¸Šæ–¹æ˜¾ç¤º
   - ç‚¹å‡» X åˆ é™¤é™„ä»¶

## åç«¯ API

### é…ç½®
åœ¨ `Redii/Redii/Services/AIService.swift` ä¸­é…ç½®ï¼š
```swift
private let baseURL: String = "https://your-worker.workers.dev"
private let apiToken: String = "your-api-token"
```

### API ç«¯ç‚¹
- `POST /ai/message-polish` - æ¶¦è‰²æ¶ˆæ¯
- `GET /ai/daily-prompt` - æ¯æ—¥æç¤º
- `POST /ai/weekly-summary` - æ¯å‘¨æ€»ç»“

## é¡¹ç›®ç»“æ„

```
Redii/
â”œâ”€â”€ Redii/
â”‚   â”œâ”€â”€ Models/              # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Moment.swift
â”‚   â”‚   â”œâ”€â”€ User.swift
â”‚   â”‚   â”œâ”€â”€ ChatMessage.swift
â”‚   â”‚   â”œâ”€â”€ AIMessage.swift     # AI æ¶ˆæ¯æ¨¡å‹
â”‚   â”‚   â””â”€â”€ AppState.swift
â”‚   â”œâ”€â”€ Views/               # è§†å›¾å±‚
â”‚   â”‚   â”œâ”€â”€ RediiApp.swift
â”‚   â”‚   â”œâ”€â”€ HomeView.swift
â”‚   â”‚   â”œâ”€â”€ AIChatView.swift    # AI Chat ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ ChatView.swift
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ ViewModels/          # è§†å›¾æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ AIChatViewModel.swift  # AI Chat é€»è¾‘
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ Repositories/        # æ•°æ®è®¿é—®
â”‚   â”œâ”€â”€ Services/           # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ AIService.swift     # AI API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ CloudKitService.swift
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ Core/               # æ ¸å¿ƒé…ç½®
â”œâ”€â”€ RediiTests/             # å•å…ƒæµ‹è¯•
â””â”€â”€ RediiBackend/           # åç«¯æœåŠ¡
```

## å¼€å‘æŒ‡å—

### è¿è¡Œé¡¹ç›®
1. æ‰“å¼€ Xcode
2. å¯¼å…¥ `Redii/Redii` æ–‡ä»¶å¤¹
3. é…ç½® CloudKitï¼ˆå¯é€‰ï¼‰
4. è¿è¡Œé¡¹ç›®

### è¿è¡Œåç«¯
```bash
cd RediiBackend
npm install
wrangler secret put OPENAI_API_KEY
wrangler secret put API_TOKEN
wrangler dev
```

### æµ‹è¯•
```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
# åœ¨ Xcode ä¸­æŒ‰ Cmd+U
```

## ç‰¹è‰²äº®ç‚¹

âœ… **ç”Ÿäº§çº§ä»£ç è´¨é‡**
- å®Œæ•´é”™è¯¯å¤„ç†
- å¼‚æ­¥æ¶æ„
- åè®®æŠ½è±¡
- ä¾èµ–æ³¨å…¥

âœ… **ç°ä»£åŒ–çš„ UI/UX**
- SwiftUI
- SF Symbols
- è§¦è§‰åé¦ˆ
- æµç•…åŠ¨ç”»

âœ… **å®Œæ•´çš„åŠŸèƒ½**
- AI å¯¹è¯
- å¤šæ¨¡æ€æ”¯æŒ
- æœ¬åœ°ç¼“å­˜
- CloudKit åŒæ­¥

âœ… **å®Œå–„çš„æµ‹è¯•**
- å•å…ƒæµ‹è¯•è¦†ç›–
- å†…å­˜æµ‹è¯•ç‰ˆæœ¬
- ViewModel æµ‹è¯•

## ä¸‹ä¸€æ­¥

- [ ] å®ç°å®é™…çš„è¯­éŸ³å½•åˆ¶
- [ ] æ·»åŠ è§†é¢‘æ’­æ”¾å™¨
- [ ] å®Œå–„æ–‡ä»¶é¢„è§ˆ
- [ ] æ·»åŠ æ¶ˆæ¯å†å²æŒä¹…åŒ–
- [ ] å®ç°è¡¨æƒ…å›åº”
- [ ] æ·»åŠ ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»

## è®¸å¯è¯

MIT License

